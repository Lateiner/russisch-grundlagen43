<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Russisch Memory: Verben des Lesens</title>
    <style>
        :root {
            --primary: #2c3e50;
            --accent: #3498db;
            --solve: #f39c12;
            --card-back: #34495e;
            --card-front: #ffffff;
            --match: #27ae60; /* Dunkles Grün für gefundene Paare im Spiel */
            --bg-body: #f0f2f5;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.8rem;
            text-align: center;
        }

        .stats-bar {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            background: white;
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .stat-item span {
            font-weight: bold;
            color: var(--accent);
        }

        /* Das Spielbrett */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            max-width: 900px;
            width: 100%;
            perspective: 1000px;
        }

        /* Die Karte selbst */
        .card {
            background-color: transparent;
            aspect-ratio: 3/4;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.5s;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .card.flip {
            transform: rotateY(180deg);
        }

        .face {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            backface-visibility: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 5px;
            box-sizing: border-box;
            font-size: 0.9rem;
            font-weight: bold;
            transition: background-color 0.3s; /* Weicher Farbübergang */
        }

        .face.back {
            background-color: var(--card-back);
            background-image: linear-gradient(135deg, #34495e 25%, #2c3e50 25%, #2c3e50 50%, #34495e 50%, #34495e 75%, #2c3e50 75%, #2c3e50 100%);
            background-size: 20px 20px;
            color: rgba(255,255,255,0.1);
            font-size: 2rem;
        }
        
        .face.back::after {
            content: "?";
            color: rgba(255,255,255,0.2);
            font-size: 2.5rem;
        }

        .face.front {
            background-color: var(--card-front);
            color: var(--primary);
            transform: rotateY(180deg);
            border: 2px solid #ddd;
            word-wrap: break-word;
        }

        /* Gelöst während des Spiels */
        .card.matched .face.front {
            border: 4px solid var(--match); /* Dicker grüner Rand */
            color: #333;
        }

        /* Controls */
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button.game-btn {
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.1s;
        }

        button.game-btn:active {
            transform: translateY(2px);
            box-shadow: none !important;
        }

        /* Restart Button */
        .restart-btn {
            background-color: var(--accent);
            box-shadow: 0 4px 0 #2980b9;
        }
        .restart-btn:hover { background-color: #3498db; }

        /* Solve Button */
        .solve-btn {
            background-color: var(--solve);
            box-shadow: 0 4px 0 #d35400;
        }
        .solve-btn:hover { background-color: #e67e22; }


        /* Responsive Anpassungen */
        @media (max-width: 900px) {
            .memory-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            .face { font-size: 0.85rem; }
        }

        @media (max-width: 600px) {
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            .face { font-size: 0.8rem; padding: 2px; }
            h1 { font-size: 1.5rem; }
            .stats-bar { font-size: 0.9rem; padding: 8px 15px; }
            .controls { flex-direction: column; width: 90%; }
            button.game-btn { width: 100%; }
        }

        /* Overlay */
        .overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .overlay.visible {
            opacity: 1;
            pointer-events: all;
        }

        .modal {
            background: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            max-width: 90%;
        }

        .modal h2 { color: var(--match); margin-top: 0; }
        .modal p { font-size: 1.2rem; }

    </style>
</head>
<body>

    <h1>Memory: Verben des Lesens</h1>

    <div class="stats-bar">
        <div class="stat-item">Züge: <span id="moves">0</span></div>
        <div class="stat-item">Zeit: <span id="time">00:00</span></div>
        <div class="stat-item">Paare: <span id="pairs">0</span>/12</div>
    </div>

    <div class="memory-grid" id="game-board">
        <!-- Karten werden per JS generiert -->
    </div>

    <div class="controls">
        <button class="game-btn restart-btn" onclick="initGame()">Spiel neu starten</button>
        <button class="game-btn solve-btn" onclick="showSolution()">Lösung anzeigen</button>
    </div>

    <div class="overlay" id="win-overlay">
        <div class="modal">
            <h2>Отлично! (Ausgezeichnet!)</h2>
            <p>Du hast alle Paare gefunden.</p>
            <p>Benötigte Züge: <span id="final-moves">0</span></p>
            <p>Zeit: <span id="final-time">00:00</span></p>
            <button class="game-btn restart-btn" onclick="closeModalAndRestart()">Nochmal spielen</button>
        </div>
    </div>

<script>
    const cardData = [
        { id: 1, ru: "читать", de: "lesen (Prozess)" },
        { id: 2, ru: "прочитать", de: "ganz durchlesen (Resultat)" },
        { id: 3, ru: "перечитать", de: "nochmal lesen" },
        { id: 4, ru: "дочитать", de: "zu Ende lesen" },
        { id: 5, ru: "почитать", de: "ein bisschen lesen" },
        { id: 6, ru: "вычитать", de: "Korrektur lesen / Fehler finden" },
        { id: 7, ru: "зачитаться", de: "sich festlesen (Zeit vergessen)" },
        { id: 8, ru: "начитаться", de: "genug/zu viel gelesen haben" },
        { id: 9, ru: "вчитаться", de: "sich vertiefen" },
        { id: 10, ru: "зачитать", de: "vorlesen / verkünden" },
        { id: 11, ru: "начитать", de: "aufsprechen (Audio)" },
        { id: 12, ru: "отчитать", de: "ausschimpfen" }
    ];

    // Eine Palette von 12 deutlich unterscheidbaren Pastellfarben für die Lösung
    const solutionColors = [
        '#FFB7B2', // Lachsrosa
        '#B5EAD7', // Minzgrün
        '#E2F0CB', // Lindgrün
        '#FFDAC1', // Pfirsich
        '#C7CEEA', // Periwinkle Blau
        '#F3E5F5', // Helles Lila
        '#FFF9C4', // Helles Gelb
        '#D7CCC8', // Helles Braun
        '#B3E5FC', // Helles Blau
        '#DCEDC8', // Helles Grün
        '#FFCCBC', // Helles Orange
        '#CFD8DC'  // Grau-Blau
    ];

    const board = document.getElementById('game-board');
    const movesDisplay = document.getElementById('moves');
    const timeDisplay = document.getElementById('time');
    const pairsDisplay = document.getElementById('pairs');
    const overlay = document.getElementById('win-overlay');

    let hasFlippedCard = false;
    let lockBoard = false;
    let firstCard, secondCard;
    let moves = 0;
    let matchesFound = 0;
    let timerInterval;
    let seconds = 0;
    let gameStarted = false;

    // Spiel initialisieren
    function initGame() {
        hasFlippedCard = false;
        lockBoard = false;
        firstCard = null;
        secondCard = null;
        moves = 0;
        matchesFound = 0;
        seconds = 0;
        gameStarted = false;

        movesDisplay.innerText = moves;
        pairsDisplay.innerText = matchesFound;
        timeDisplay.innerText = "00:00";
        overlay.classList.remove('visible');
        clearInterval(timerInterval);

        board.innerHTML = '';

        const deck = [];
        cardData.forEach(pair => {
            deck.push({ id: pair.id, text: pair.ru, type: 'ru' });
            deck.push({ id: pair.id, text: pair.de, type: 'de' });
        });

        shuffle(deck);

        deck.forEach(item => {
            const cardElement = document.createElement('div');
            cardElement.classList.add('card');
            cardElement.dataset.pairId = item.id;
            
            // HTML Struktur der Karte
            cardElement.innerHTML = `
                <div class="face front">${item.text}</div>
                <div class="face back"></div>
            `;

            cardElement.addEventListener('click', flipCard);
            board.appendChild(cardElement);
        });
    }

    // Funktion: Lösung anzeigen mit Farben
    function showSolution() {
        if (matchesFound === cardData.length) return; 

        // Timer stoppen
        clearInterval(timerInterval);
        
        // Board sperren
        lockBoard = true;

        const allCards = document.querySelectorAll('.card');
        
        allCards.forEach(card => {
            // 1. Karte umdrehen
            if (!card.classList.contains('flip')) {
                card.classList.add('flip');
            }

            // 2. ID holen (1 bis 12)
            const id = parseInt(card.dataset.pairId);
            
            // 3. Farbe aus der Palette zuweisen (ID - 1 für Array-Index)
            // Wir färben die Vorderseite (.front) ein
            const frontFace = card.querySelector('.face.front');
            
            // Wenn die Karte noch nicht "matched" war, färben wir sie komplett ein
            // Wenn sie schon matched war, überschreiben wir das Grün, damit es einheitlich aussieht
            frontFace.style.backgroundColor = solutionColors[id - 1];
            frontFace.style.borderColor = solutionColors[id - 1]; // Rand auch einfärben
            frontFace.style.color = '#000'; // Text schwarz für Lesbarkeit
        });
    }

    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function startTimer() {
        if (gameStarted) return;
        gameStarted = true;
        timerInterval = setInterval(() => {
            seconds++;
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timeDisplay.innerText = 
                `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }, 1000);
    }

    function flipCard() {
        if (lockBoard) return;
        if (this === firstCard) return;

        startTimer();

        this.classList.add('flip');

        if (!hasFlippedCard) {
            hasFlippedCard = true;
            firstCard = this;
            return;
        }

        secondCard = this;
        checkForMatch();
    }

    function checkForMatch() {
        moves++;
        movesDisplay.innerText = moves;

        let isMatch = firstCard.dataset.pairId === secondCard.dataset.pairId;

        if (isMatch) {
            disableCards();
        } else {
            unflipCards();
        }
    }

    function disableCards() {
        firstCard.removeEventListener('click', flipCard);
        secondCard.removeEventListener('click', flipCard);
        
        firstCard.classList.add('matched');
        secondCard.classList.add('matched');

        matchesFound++;
        pairsDisplay.innerText = matchesFound;

        resetBoard();
        checkWin();
    }

    function unflipCards() {
        lockBoard = true;

        setTimeout(() => {
            firstCard.classList.remove('flip');
            secondCard.classList.remove('flip');

            resetBoard();
        }, 1200);
    }

    function resetBoard() {
        [hasFlippedCard, lockBoard] = [false, false];
        [firstCard, secondCard] = [null, null];
    }

    function checkWin() {
        if (matchesFound === cardData.length) {
            clearInterval(timerInterval);
            document.getElementById('final-moves').innerText = moves;
            document.getElementById('final-time').innerText = timeDisplay.innerText;
            
            setTimeout(() => {
                overlay.classList.add('visible');
            }, 500);
        }
    }

    function closeModalAndRestart() {
        initGame();
    }

    initGame();

</script>

</body>
</html>